html_attr('tr')
html %>%
html_nodes("table") %>%
.[2] %>%
html_nodes('tr') %>%
.[2] %>% # change
html_attr('td')
html %>%
html_nodes("table") %>%
.[2] %>%
html_nodes('tr') %>%
.[2] %>% # change
html_attrs('td')
library(rvest)
library(tidyverse)
html <- read_html('https://stocks.finance.yahoo.co.jp/stocks/history/?code=3906.T')
html %>%
html_nodes("table") %>%
.[2] %>%
html_nodes('tr') %>%
.[2]
html %>%
html_nodes("table") %>%
.[2] %>%
html_nodes('tr') %>%
.[2] %>% # change
html_attrs('td')
html %>%
html_nodes("table") %>%
.[2] %>%
html_nodes('tr') %>%
.[2] %>% # change
html_attr('td')
html %>%
html_nodes("table") %>%
.[2] %>%
html_nodes('tr') %>%
.[2] %>% # change
html_attr('tr')
html %>%
html_nodes("table") %>%
.[2] %>%
html_nodes('tr') %>%
.[2]
500 * 0.01
setwd("~/Desktop/j_league/scripts")
setwd("~/Desktop/j_league/scripts")
library(tidyverse)
data <- read_csv('../data/data.csv')
data
data_detail <- read_csv('../data/data_detail.csv')
data <- read_csv('../data/data.csv')
data_detail
data <- data %>%
filter(year >= 2000)
data
data_all <- cbind(data, data_detail)
data_all
data_all <- cbind(data, data_detail) %>% tibble()
data_all <- cbind(data, data_detail) %>% tibble()
data_all
data_all %>%
mutate(total_score = home_scores + away_scores)
data_all <- data_all %>%
mutate(total_score = is.integer(home_scores) + is.integer(away_scores))
data_all
data_all
setwd("~/Desktop/j_league/scripts")
library(tidyverse)
data <- read_csv('../data/data.csv')
data_detail <- read_csv('../data/data_detail.csv')
data <- data %>%
filter(year >= 2000)
data_all <- cbind(data, data_detail) %>% tibble()
data_all <- data_all %>%
mutate(total_score = is.integer(home_scores) + is.integer(away_scores))
data_all
data_all <- data_all %>%
mutate(total_score = as.integer(home_scores) + as.integer(away_scores))
data_all
data_all <- data_all %>%
mutate(total_score = as.integer(home_scores) + as.integer(away_scores)) %>%
group_by(whether) %>%
summarise(
mean_score = mean(total_score)
)
data_all
data_all <- data_all %>%
mutate(total_score = as.integer(home_scores) + as.integer(away_scores)) %>%
group_by(whether) %>%
summarise(
mean_score = mean(total_score)
) %>%
ggplot() +
geom_bar(aes(x = whether, y = mean_score))
setwd("~/Desktop/j_league/scripts")
library(tidyverse)
data <- read_csv('../data/data.csv')
data_detail <- read_csv('../data/data_detail.csv')
data <- data %>%
filter(year >= 2000)
data_all <- cbind(data, data_detail) %>% tibble()
data_all <- data_all %>%
mutate(total_score = as.integer(home_scores) + as.integer(away_scores)) %>%
group_by(whether) %>%
summarise(
mean_score = mean(total_score)
) %>%
ggplot() +
geom_bar(aes(x = whether, y = mean_score))
data_all <- cbind(data, data_detail) %>% tibble()
data_all %>%
mutate(total_score = as.integer(home_scores) + as.integer(away_scores)) %>%
group_by(whether) %>%
summarise(
mean_score = mean(total_score)
) %>%
ggplot() +
geom_bar(aes(x = whether, y = mean_score))
data_all %>%
mutate(total_score = as.integer(home_scores) + as.integer(away_scores)) %>%
group_by(whether) %>%
summarise(
mean_score = mean(total_score)
) %>%
ggplot() +
geom_bar(aes(x = whether, y = mean_score), stat = 'identity')
my_theme <-
theme_bw(base_family = "HiraKakuProN-W3") +
theme(axis.text = element_text(size = 20), legend.position="none",
axis.title = element_text(size = 20), axis.ticks.length=unit(0.5, "cm"))
theme_set(my_theme) # set theme
data_all %>%
mutate(total_score = as.integer(home_scores) + as.integer(away_scores)) %>%
group_by(whether) %>%
summarise(
mean_score = mean(total_score)
) %>%
ggplot() +
geom_bar(aes(x = whether, y = mean_score), stat = 'identity')
my_theme <-
theme_bw(base_family = "HiraKakuProN-W3") +
theme(axis.text = element_text(size = 10), legend.position="none",
axis.title = element_text(size = 20), axis.ticks.length=unit(0.5, "cm"))
theme_set(my_theme) # set theme
data_all %>%
mutate(total_score = as.integer(home_scores) + as.integer(away_scores)) %>%
group_by(whether) %>%
summarise(
mean_score = mean(total_score)
) %>%
ggplot() +
geom_bar(aes(x = whether, y = mean_score), stat = 'identity')
my_theme <-
theme_bw(base_family = "HiraKakuProN-W3") +
theme(axis.text = element_text(size = 10, angle = 45), legend.position="none",
axis.title = element_text(size = 20), axis.ticks.length=unit(0.5, "cm"))
theme_set(my_theme) # set theme
data_all %>%
mutate(total_score = as.integer(home_scores) + as.integer(away_scores)) %>%
group_by(whether) %>%
summarise(
mean_score = mean(total_score)
) %>%
ggplot() +
geom_bar(aes(x = whether, y = mean_score), stat = 'identity')
data_all %>%
mutate(total_score = as.integer(home_scores) + as.integer(away_scores)) %>%
ggplot() +
geom_boxplot(aes(x = whether, y = mean_score), stat = 'identity')
data_all %>%
mutate(total_score = as.integer(home_scores) + as.integer(away_scores)) %>%
ggplot() +
geom_boxplot(aes(x = whether, y = mean_score), stat = 'identity')
data_all <- cbind(data, data_detail) %>% tibble()
setwd("~/Desktop/j_league/scripts")
library(tidyverse)
data <- read_csv('../data/data.csv')
data_detail <- read_csv('../data/data_detail.csv')
data <- data %>%
filter(year >= 2000)
data_all <- cbind(data, data_detail) %>% tibble()
my_theme <-
theme_bw(base_family = "HiraKakuProN-W3") +
theme(axis.text = element_text(size = 10, angle = 45), legend.position="none",
axis.title = element_text(size = 20), axis.ticks.length=unit(0.5, "cm"))
theme_set(my_theme) # set theme
data_all %>%
mutate(total_score = as.integer(home_scores) + as.integer(away_scores)) %>%
ggplot() +
geom_boxplot(aes(x = whether, y = mean_score))
data_all %>%
mutate(total_score = as.integer(home_scores) + as.integer(away_scores)) %>%
ggplot() +
geom_boxplot(aes(x = whether, y = total_score))
data_all %>%
mutate(total_score = as.integer(home_scores) + as.integer(away_scores)) %>%
ggplot(aes(x = whether, y = total_score)) +
geom_boxplot() +
geom_jitter(alpha = 0.8)
data_all %>%
mutate(total_score = as.integer(home_scores) + as.integer(away_scores)) %>%
ggplot(aes(x = whether, y = total_score)) +
geom_boxplot() +
geom_jitter(alpha = 0.3)
data_all %>%
mutate(total_score = as.integer(home_scores) + as.integer(away_scores)) %>%
ggplot(aes(x = whether, y = total_score)) +
geom_violin()
data_all %>%
mutate(total_score = as.integer(home_scores) + as.integer(away_scores)) %>%
ggplot(aes(x = whether, y = total_score)) +
geom_boxplot() +
geom_jitter(alpha = 0.3)
data_all %>%
mutate(total_score = as.integer(home_scores) + as.integer(away_scores)) %>%
ggplot(aes(x = whether, y = total_score)) +
geom_boxplot()
data_all %>%
mutate(total_score = as.integer(home_scores) + as.integer(away_scores)) %>%
ggplot(aes(x = whether, y = total_score)) +
geom_jitter(alpha = 0.3)
data_all %>%
mutate(total_score = as.integer(home_scores) + as.integer(away_scores)) %>%
ggplot(aes(x = whether, y = total_score)) +
geom_boxplot()
data_all
data_all %>%
mutate(total_score = as.integer(home_scores) + as.integer(away_scores)) %>%
ggplot(aex(x = temperature, y = total_score)) +
geom_boxplot()
data_all %>%
mutate(total_score = as.integer(home_scores) + as.integer(away_scores)) %>%
ggplot(aex(x = temperature, y = total_score)) +
geom_point()
data_all %>%
mutate(total_score = as.integer(home_scores) + as.integer(away_scores)) %>%
ggplot(aes(x = temperature, y = total_score)) +
geom_point()
data_all %>%
mutate(total_score = as.integer(home_scores) + as.integer(away_scores)) %>%
ggplot(aes(x = temperature, y = total_score)) +
geom_point() +
geom_smooth()
data_all %>%
mutate(total_score = as.integer(home_scores) + as.integer(away_scores)) %>%
ggplot(aes(x = temperature, y = total_score)) +
geom_point() +
geom_smooth(method = 'lm')
data_all %>%
mutate(total_score = as.integer(home_scores) + as.integer(away_scores)) %>%
ggplot(aes(x = humidity, y = total_score)) +
geom_point() +
geom_smooth(method = 'lm')
data_all
data_all %>%
mutate(total_score = as.integer(home_scores) + as.integer(away_scores)) %>%
ggplot(aes(x = as.integer(humidity), y = total_score)) +
geom_point() +
geom_smooth(method = 'lm')
as.integer(humidity)
data_all %>%
mutate(total_score = as.integer(home_scores) + as.integer(away_scores)) %>%
ggplot(aes(x = as.integer(humidity), y = total_score)) +
geom_point()
data_all %>%
mutate(total_score = as.integer(home_scores) + as.integer(away_scores),
humidity = as.integer(humidity)) %>%
ggplot(aes(x = as.integer(humidity), y = total_score)) +
geom_point()
data_all %>%
mutate(total_score = as.integer(home_scores) + as.integer(away_scores),
humidity = as.integer(humidity)) %>%
na.omit() %>%
ggplot(aes(x = as.integer(humidity), y = total_score)) +
geom_point() +
geom_smooth(method = 'lm')
data_all %>%
mutate(total_score = as.integer(home_scores) + as.integer(away_scores),
humidity = as.integer(humidity))
data_all %>%
mutate(total_score = as.integer(home_scores) + as.integer(away_scores))
data_all %>%
mutate(total_score = as.integer(home_scores) + as.integer(away_scores)) %>%
str_replace(.$humidity, '%', '')
data_all %>%
mutate(total_score = as.integer(home_scores) + as.integer(away_scores)) %>%
str_replace($humidity, '%', '')
data_all %>%
mutate(total_score = as.integer(home_scores) + as.integer(away_scores)) %>%
str_replace(.$humidity, '%', '')
data_all %>%
mutate(total_score = as.integer(home_scores) + as.integer(away_scores)) %>%
select(humidity)
str_replace('%', '')
data_all %>%
mutate(total_score = as.integer(home_scores) + as.integer(away_scores)) %>%
select(humidity)
str_replace('%', '')
data_all %>%
mutate(total_score = as.integer(home_scores) + as.integer(away_scores)) %>%
ggplot(aes(x = whether, y = total_score)) +
geom_boxplot()
data_all %>%
mutate(total_score = as.integer(home_scores) + as.integer(away_scores)) %>%
ggplot(aes(x = temperature, y = total_score)) +
geom_point()
data_all %>%
mutate(total_score = as.integer(home_scores) + as.integer(away_scores)) %>%
ggplot(aes(x = total_score)) +
geom_histogram()
data_all %>%
mutate(total_score = as.integer(home_scores) + as.integer(away_scores)) %>%
ggplot(aes(x = total_score)) +
geom_histogram(bins = 50)
data_all %>%
mutate(total_score = as.integer(home_scores) + as.integer(away_scores)) %>%
ggplot(aes(x = total_score)) +
geom_histogram(bins = 10)
data_all %>%
mutate(total_score = as.integer(home_scores) + as.integer(away_scores)) %>%
ggplot(aes(x = total_score)) +
geom_histogram(bins = 20)
data_all %>%
mutate(total_score = as.integer(home_scores) + as.integer(away_scores)) %>%
ggplot(aes(x = total_score)) +
geom_histogram(bins = 25)
data_all %>%
mutate(total_score = as.integer(home_scores) + as.integer(away_scores)) %>%
ggplot(aes(x = total_score)) +
geom_histogram(bins = 30)
data_all %>%
mutate(total_score = as.integer(home_scores) + as.integer(away_scores)) %>%
ggplot(aes(x = whether, y = total_score)) +
geom_boxplot()
data_all %>%
mutate(total_score = as.integer(home_scores) + as.integer(away_scores)) %>%
group_by(whether) %>%
summarise(
mean_score = mean(total_score)
)
data_all %>%
mutate(total_score = as.integer(home_scores) + as.integer(away_scores)) %>%
group_by(whether) %>%
summarise(
mean_score = mean(total_score)
) %>%
ggplot() +
geom_bar(aes(x = whether, y = mean_score))
data_all %>%
mutate(total_score = as.integer(home_scores) + as.integer(away_scores)) %>%
group_by(whether) %>%
summarise(
mean_score = mean(total_score)
) %>%
ggplot() +
geom_bar(aes(x = whether, y = mean_score), stat = 'identity')
data_all %>%
mutate(total_score = as.integer(home_scores) + as.integer(away_scores)) %>%
group_by(whether) %>%
summarise(
mean_score = mean(total_score)
) %>%
ggplot() +
geom_point(aes(x = whether, y = mean_score))
data_all %>%
mutate(total_score = as.integer(home_scores) + as.integer(away_scores)) %>%
group_by(whether) %>%
summarise(
mean_score = mean(total_score)
) %>%
ggplot() +
geom_point(aes(x = whether, y = mean_score), color = 'red', size = 10)
data_all %>%
mutate(total_score = as.integer(home_scores) + as.integer(away_scores)) %>%
group_by(whether) %>%
summarise(
mean_score = mean(total_score)
) %>%
ggplot() +
geom_point(aes(x = whether, y = mean_score), color = 'red', size = 5)
data_all %>%
mutate(total_score = as.integer(home_scores) + as.integer(away_scores)) %>%
group_by(whether) %>%
summarise(
mean_score = mean(total_score)
) %>%
ggplot() +
geom_point(aes(x = whether, y = mean_score), color = 'red', size = 3)
p +
data_all %>%
mutate(total_score = as.integer(home_scores) + as.integer(away_scores)) %>%
geom_jitter(aes(y = total_score, x = whether))
p <-
data_all %>%
mutate(total_score = as.integer(home_scores) + as.integer(away_scores)) %>%
group_by(whether) %>%
summarise(
mean_score = mean(total_score)
) %>%
ggplot() +
geom_point(aes(x = whether, y = mean_score), color = 'red', size = 3)
p +
data_all %>%
mutate(total_score = as.integer(home_scores) + as.integer(away_scores)) %>%
geom_jitter(aes(y = total_score, x = whether))
p +
data_all %>%
mutate(total_score = as.integer(home_scores) + as.integer(away_scores)) %>%
ggplot()+
geom_jitter(aes(x = whether, y = total_score))
p +
data_all %>%
mutate(total_score = as.integer(home_scores) + as.integer(away_scores)) %>%
geom_jitter(mapping = aes(x = whether, y = total_score))
p1 <-
data_all %>%
mutate(total_score = as.integer(home_scores) + as.integer(away_scores)) %>%
group_by(whether) %>%
summarise(
mean_score = mean(total_score)
) %>%
ggplot() +
geom_point(aes(x = whether, y = mean_score), color = 'red', size = 3)
p2 <-
data_all %>%
mutate(total_score = as.integer(home_scores) + as.integer(away_scores)) %>%
geom_jitter(mapping = aes(x = whether, y = total_score))
p1 + p2
p1 <-
data_all %>%
mutate(total_score = as.integer(home_scores) + as.integer(away_scores)) %>%
group_by(whether) %>%
summarise(
mean_score = mean(total_score)
) %>%
ggplot() +
geom_point(aes(x = whether, y = mean_score), color = 'red', size = 3)
p2 <-
data_all %>%
mutate(total_score = as.integer(home_scores) + as.integer(away_scores)) %>%
geom_jitter(mapping = aes(x = whether, y = total_score), alpha = 0.2)
p2 + p1
p1 <-
data_all %>%
mutate(total_score = as.integer(home_scores) + as.integer(away_scores)) %>%
group_by(whether) %>%
summarise(
mean_score = mean(total_score)
) %>%
ggplot() +
geom_point(aes(x = whether, y = mean_score), color = 'red', size = 3)
p2 <-
data_all %>%
mutate(total_score = as.integer(home_scores) + as.integer(away_scores)) %>%
geom_jitter(mapping = aes(x = whether, y = total_score), alpha = 0.2)
p1 <-
data_all %>%
mutate(total_score = as.integer(home_scores) + as.integer(away_scores)) %>%
group_by(whether) %>%
summarise(
mean_score = mean(total_score)
) %>%
geom_point(aes(x = whether, y = mean_score), color = 'red', size = 3)
p2 <-
data_all %>%
ggplot() +
mutate(total_score = as.integer(home_scores) + as.integer(away_scores)) %>%
geom_jitter(mapping = aes(x = whether, y = total_score), alpha = 0.2)
p2 + p1
p1 <-
data_all %>%
mutate(total_score = as.integer(home_scores) + as.integer(away_scores)) %>%
group_by(whether) %>%
summarise(
mean_score = mean(total_score)
) %>%
geom_point(aes(x = whether, y = mean_score), color = 'red', size = 3)
p2 <-
data_all %>%
mutate(total_score = as.integer(home_scores) + as.integer(away_scores)) %>%
ggplot() +
geom_jitter(mapping = aes(x = whether, y = total_score), alpha = 0.2)
p2 + p1
p1 <-
data_all %>%
mutate(total_score = as.integer(home_scores) + as.integer(away_scores)) %>%
group_by(whether) %>%
summarise(
mean_score = mean(total_score)
) %>%
ggplot() +
geom_point(aes(x = whether, y = mean_score), color = 'red', size = 3)
p2 <-
data_all %>%
mutate(total_score = as.integer(home_scores) + as.integer(away_scores)) %>%
geom_jitter(mapping = aes(x = whether, y = total_score), alpha = 0.2)
p2 + p1
p1 <-
data_all %>%
mutate(total_score = as.integer(home_scores) + as.integer(away_scores)) %>%
group_by(whether) %>%
summarise(
mean_score = mean(total_score)
) %>%
ggplot() +
geom_point(aes(x = whether, y = mean_score), color = 'red', size = 3)
p2 <-
data_all %>%
mutate(total_score = as.integer(home_scores) + as.integer(away_scores)) %>%
geom_jitter(mapping = aes(x = whether, y = total_score), alpha = 0.2)
p1 + p2
